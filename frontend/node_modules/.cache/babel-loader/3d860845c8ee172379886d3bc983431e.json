{"ast":null,"code":"var _jsxFileName = \"/home/jael/Dropbox/devinhouse/front/react/amorinha/frontend/src/pages/Cadaluno/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { PageArea } from './styled';\nimport { PageContainer, PageTitle, ErrorMessage, SuccessMessage } from '../../components/MainComponents';\nimport useAPI from '../../helpers/AmorinhaAPI';\nimport formCad from './formCad';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Page() {\n  _s();\n\n  const api = useAPI();\n  const fileField = useRef();\n  const [name, setName] = useState('');\n  const [birthDate, setBirthDate] = useState('');\n  const [responsableName, setResponsableName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [emergencyWarning, setEmergencyWarning] = useState('');\n  const [phoneEmergency, setPhoneEmergency] = useState('');\n  const [foodRestriction, setFoodRestriction] = useState('');\n  const [descriptionFoodRestriction, setDescriptionFoodRestriction] = useState('');\n  const [imageAuthorization, setImageAuthorization] = useState(false);\n  const [authorizedPeople, setAuthorizedPeople] = useState('');\n  const [classes, setClasses] = useState('');\n  const [additionalNotes, setAdditionalNotes] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [disable, setDisable] = useState(false);\n  const [classesList, setClassesList] = useState([]);\n  useEffect(() => {\n    const getClasses = async () => {\n      const json = await api.getClasses();\n      setClassesList(json.classes);\n    };\n\n    getClasses();\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault(); // setDisable(true);\n\n    setError('');\n    const fData = new FormData();\n    fData.append('name', name);\n    fData.append('birthDate', birthDate);\n    fData.append('responsableName', responsableName);\n    fData.append('phone', phone);\n    fData.append('emergencyWarning', emergencyWarning);\n    fData.append('phoneEmergency', phoneEmergency);\n    fData.append('foodRestriction', foodRestriction);\n    fData.append('descriptionFoodRestriction', descriptionFoodRestriction);\n    fData.append('imageAuthorization', imageAuthorization);\n    fData.append('authorizedPeople', authorizedPeople);\n    fData.append('classes', classes);\n    fData.append('additionalNotes', additionalNotes);\n\n    if (fileField.current.files.length > 0) {\n      fData.append('name', fileField.current.files[0]);\n    }\n\n    const json = await api.addStudent(fData);\n    console.log(json.id);\n\n    if (json.error) {\n      setError(json.error);\n    } else {\n      setSuccess(\"Cadastro realizado com sucesso!\"); // alert(\"Cadastro realizado com sucesso!\");\n\n      setName('');\n      setResponsableName('');\n      setPhone('');\n      /**CRIAR UM BOTÃO EDITAR */\n      // history.push(`/students/edit/${json.id}`);\n      // return;\n    }\n\n    setDisable(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      children: \"Cadastro de Aluno\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageArea, {\n      children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), success && /*#__PURE__*/_jsxDEV(SuccessMessage, {\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"formCad\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Page, \"9/0Tv3b4bu5nf/snQCDAEZ9LtJ8=\", false, function () {\n  return [useAPI];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/home/jael/Dropbox/devinhouse/front/react/amorinha/frontend/src/pages/Cadaluno/index.js"],"names":["React","useState","useEffect","useRef","PageArea","PageContainer","PageTitle","ErrorMessage","SuccessMessage","useAPI","formCad","Page","api","fileField","name","setName","birthDate","setBirthDate","responsableName","setResponsableName","phone","setPhone","emergencyWarning","setEmergencyWarning","phoneEmergency","setPhoneEmergency","foodRestriction","setFoodRestriction","descriptionFoodRestriction","setDescriptionFoodRestriction","imageAuthorization","setImageAuthorization","authorizedPeople","setAuthorizedPeople","classes","setClasses","additionalNotes","setAdditionalNotes","error","setError","success","setSuccess","disable","setDisable","classesList","setClassesList","getClasses","json","handleSubmit","e","preventDefault","fData","FormData","append","current","files","length","addStudent","console","log","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { PageArea } from './styled';\nimport { PageContainer, PageTitle, ErrorMessage, SuccessMessage } from '../../components/MainComponents'\nimport useAPI from '../../helpers/AmorinhaAPI';\nimport formCad from './formCad';\n\n\nfunction Page(){\n\n    const api = useAPI();\n\n    const fileField = useRef();\n\n    const [name, setName] = useState('');\n    const [birthDate, setBirthDate] = useState('');\n    const [responsableName, setResponsableName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [emergencyWarning, setEmergencyWarning] = useState('');\n    const [phoneEmergency, setPhoneEmergency] = useState('');\n    const [foodRestriction, setFoodRestriction] = useState('');\n    const [descriptionFoodRestriction, setDescriptionFoodRestriction] = useState('');\n    const [imageAuthorization, setImageAuthorization] = useState(false);\n    const [authorizedPeople , setAuthorizedPeople] = useState('');\n    const [classes, setClasses] = useState('');\n    const [additionalNotes, setAdditionalNotes] = useState('');\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [disable, setDisable] = useState(false);\n\n    const [classesList, setClassesList] = useState([]);\n\n\n    useEffect(() => {\n        const getClasses = async () => {\n            const json = await api.getClasses();\n            setClassesList(json.classes);\n        };\n\n        getClasses();\n    }, [])\n\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        // setDisable(true);\n        setError('');\n\n        const fData = new FormData();\n        fData.append('name', name);\n        fData.append('birthDate', birthDate);\n        fData.append('responsableName', responsableName);\n        fData.append('phone', phone);\n        fData.append('emergencyWarning', emergencyWarning);\n        fData.append('phoneEmergency', phoneEmergency);\n        fData.append('foodRestriction', foodRestriction);\n        fData.append('descriptionFoodRestriction', descriptionFoodRestriction);\n        fData.append('imageAuthorization', imageAuthorization);\n        fData.append('authorizedPeople', authorizedPeople);\n        fData.append('classes', classes);\n        fData.append('additionalNotes', additionalNotes);\n        \n        if (fileField.current.files.length > 0){\n            fData.append('name', fileField.current.files[0]);\n        }\n\n        \n        const json = await api.addStudent(fData);\n        console.log(json.id);\n        \n        if (json.error){\n            setError(json.error);\n        } else {\n            setSuccess(\"Cadastro realizado com sucesso!\");\n            // alert(\"Cadastro realizado com sucesso!\");\n            setName('');\n            setResponsableName('');\n            setPhone('');\n            /**CRIAR UM BOTÃO EDITAR */\n            // history.push(`/students/edit/${json.id}`);\n            // return;\n        }\n\n        setDisable(false);\n    }\n\n    return(\n        <PageContainer>\n            <PageTitle>Cadastro de Aluno</PageTitle>\n            <PageArea>\n                {error &&\n                    <ErrorMessage>{error}</ErrorMessage>\n                }\n                {success &&\n                    <SuccessMessage>{success}</SuccessMessage>\n                }\n                <formCad/>\n                \n            </PageArea>\n        </PageContainer>\n    )\n}\n\nexport default Page;"]},"metadata":{},"sourceType":"module"}