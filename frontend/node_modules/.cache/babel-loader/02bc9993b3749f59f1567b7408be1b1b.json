{"ast":null,"code":"var _jsxFileName = \"/home/jael/Dropbox/devinhouse/front/react/amorinha/frontend/src/pages/Cadaluno/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { PageArea } from './styled';\nimport { PageContainer, PageTitle, ErrorMessage, SuccessMessage } from '../../components/MainComponents';\nimport useAPI from '../../helpers/AmorinhaAPI';\nimport { Container, TextField, Button, FormGroup, Checkbox, FormControlLabel } from '@material-ui/core'; // import DateFnsUtils from '@date-io/date-fns';\n\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Page() {\n  _s();\n\n  const api = useAPI();\n  const fileField = useRef();\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [birthDate, setBirthDate] = useState(new Date('2014-08-18T21:11:54'));\n  const [responsableName, setResponsableName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [emergencyWarning, setEmergencyWarning] = useState('');\n  const [phoneEmergency, setPhoneEmergency] = useState('');\n  const [foodRestriction, setFoodRestriction] = useState(false);\n  const [descriptionFoodRestriction, setDescriptionFoodRestriction] = useState('');\n  const [imageAuthorization, setImageAuthorization] = useState(false);\n  const [authorizedPeople, setAuthorizedPeople] = useState('');\n  const [classes, setClasses] = useState('');\n  const [additionalNotes, setAdditionalNotes] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [disable, setDisable] = useState(false);\n  const [button, setButton] = useState('Cadastrar');\n  const [classesList, setClassesList] = useState([]);\n  useEffect(() => {\n    const getClasses = async () => {\n      const json = await api.getClasses();\n      setClassesList(json.classes);\n    };\n\n    getClasses();\n  }, []);\n\n  const getStudent = async id => {\n    const json = await api.getStudent(id);\n    setId(id);\n    setName(json.student.name);\n    setBirthDate(json.student.birthDate);\n    setResponsableName(json.student.responsableName);\n    setPhone(json.student.phone);\n    setEmergencyWarning(json.student.emergencyWarning);\n    setFoodRestriction(json.student.foodRestriction);\n    setDescriptionFoodRestriction(json.student.descriptionFoodRestriction);\n    setImageAuthorization(json.student.imageAuthorization);\n    setAuthorizedPeople(json.student.authorizedPeople);\n    setClasses(json.student.classes);\n    setAdditionalNotes(json.student.additionalNotes);\n    setButton('Editar');\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setDisable(true);\n    setError('');\n    console.log(name);\n    alert(name);\n    const fData = new FormData();\n    fData.append('name', name);\n    fData.append('birthDate', birthDate);\n    fData.append('responsableName', responsableName);\n    fData.append('phone', phone);\n    fData.append('emergencyWarning', emergencyWarning);\n    fData.append('phoneEmergency', phoneEmergency);\n    fData.append('foodRestriction', foodRestriction);\n    fData.append('descriptionFoodRestriction', descriptionFoodRestriction);\n    fData.append('imageAuthorization', imageAuthorization);\n    fData.append('authorizedPeople', authorizedPeople);\n    fData.append('classes', classes);\n    fData.append('additionalNotes', additionalNotes);\n\n    if (fileField.current.files.length > 0) {\n      fData.append('name', fileField.current.files[0]);\n    }\n\n    if (id) {\n      fData.append('id', id);\n    }\n\n    const json = await api.addStudent(fData);\n\n    if (json.error) {\n      setError(json.error);\n    } else {\n      setSuccess(\"Cadastro realizado com sucesso!\");\n      /**CRIAR UM BOTÃO EDITAR */\n      // history.push(`/students/edit/${json.id}`);\n\n      getStudent(json.id);\n    }\n\n    setDisable(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      children: \"Cadastro de Aluno\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageArea, {\n      children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this), success && /*#__PURE__*/_jsxDEV(SuccessMessage, {\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Nome\",\n          type: \"text\",\n          value: name,\n          onChange: e => setName(e.target.value) // required\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(KeyboardDatePicker, {\n          disableToolbar: true,\n          format: \"dd/MM/yyyy\",\n          margin: \"normal\" // id=\"date-picker-inline\"\n          ,\n          label: \"Date picker inline\",\n          value: birthDate // onChange={}\n          ,\n          KeyboardButtonProps: {\n            'aria-label': 'change date'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"date\",\n          label: \"Data de Nascimento\",\n          disabled: disable,\n          value: birthDate,\n          onChange: e => setBirthDate(e.target.value) // required\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Nome do Respons\\xE1vel\",\n          disabled: disable,\n          value: responsableName,\n          onChange: e => setResponsableName(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Telefone de Contato\",\n          disabled: disable,\n          value: phone,\n          onChange: e => setPhone(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Aviso de Emerg\\xEAncia\",\n          disabled: disable,\n          value: emergencyWarning,\n          onChange: e => setEmergencyWarning(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Telefone para Emerg\\xEAncia\",\n          disabled: disable,\n          value: phoneEmergency,\n          onChange: e => setPhoneEmergency(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Descri\\xE7\\xE3o da Restri\\xE7\\xE3o Alimentar\",\n          disabled: disable,\n          value: descriptionFoodRestriction,\n          onChange: e => setDescriptionFoodRestriction(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n          label: \"Autoriza\\xE7\\xE3o Para Uso da Imagem\",\n          control: /*#__PURE__*/_jsxDEV(Checkbox, {\n            disabled: disable,\n            onChange: e => setImageAuthorization(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 87\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Autorizados Para Buscar a Crian\\xE7a\",\n          disabled: disable,\n          value: authorizedPeople,\n          onChange: e => setAuthorizedPeople(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          type: \"text\",\n          label: \"Observa\\xE7\\xF5es Adicionais\",\n          disabled: disable,\n          value: additionalNotes,\n          onChange: e => setAdditionalNotes(e.target.value) // required \n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          disabled: disable,\n          children: button\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Page, \"YkJBoDwaiAHejQmUIHmCop14Njo=\", false, function () {\n  return [useAPI];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/home/jael/Dropbox/devinhouse/front/react/amorinha/frontend/src/pages/Cadaluno/index.js"],"names":["React","useState","useEffect","useRef","PageArea","PageContainer","PageTitle","ErrorMessage","SuccessMessage","useAPI","Container","TextField","Button","FormGroup","Checkbox","FormControlLabel","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","Page","api","fileField","id","setId","name","setName","birthDate","setBirthDate","Date","responsableName","setResponsableName","phone","setPhone","emergencyWarning","setEmergencyWarning","phoneEmergency","setPhoneEmergency","foodRestriction","setFoodRestriction","descriptionFoodRestriction","setDescriptionFoodRestriction","imageAuthorization","setImageAuthorization","authorizedPeople","setAuthorizedPeople","classes","setClasses","additionalNotes","setAdditionalNotes","error","setError","success","setSuccess","disable","setDisable","button","setButton","classesList","setClassesList","getClasses","json","getStudent","student","handleSubmit","e","preventDefault","console","log","alert","fData","FormData","append","current","files","length","addStudent","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { PageArea } from './styled';\nimport { PageContainer, PageTitle, ErrorMessage, SuccessMessage } from '../../components/MainComponents'\nimport useAPI from '../../helpers/AmorinhaAPI';\nimport {Container, TextField, Button, FormGroup, Checkbox, FormControlLabel} from '@material-ui/core';\n// import DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\n\n\nfunction Page(){\n\n    const api = useAPI();\n\n    const fileField = useRef();\n\n    const [id, setId] = useState('');\n    const [name, setName] = useState('');\n    const [birthDate, setBirthDate] = useState(new Date('2014-08-18T21:11:54'));\n    const [responsableName, setResponsableName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [emergencyWarning, setEmergencyWarning] = useState('');\n    const [phoneEmergency, setPhoneEmergency] = useState('');\n    const [foodRestriction, setFoodRestriction] = useState(false);\n    const [descriptionFoodRestriction, setDescriptionFoodRestriction] = useState('');\n    const [imageAuthorization, setImageAuthorization] = useState(false);\n    const [authorizedPeople , setAuthorizedPeople] = useState('');\n    const [classes, setClasses] = useState('');\n    const [additionalNotes, setAdditionalNotes] = useState('');\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [disable, setDisable] = useState(false);\n    const [button, setButton] = useState('Cadastrar');\n\n    const [classesList, setClassesList] = useState([]);\n\n    useEffect(() => {\n        const getClasses = async () => {\n            const json = await api.getClasses();\n            setClassesList(json.classes);\n        };\n\n        getClasses();\n    }, [])\n\n    const getStudent = async (id) => {\n        const json = await api.getStudent(id);\n\n        setId(id);\n        setName(json.student.name);\n        setBirthDate(json.student.birthDate);\n        setResponsableName(json.student.responsableName);\n        setPhone(json.student.phone);\n        setEmergencyWarning(json.student.emergencyWarning);\n        setFoodRestriction(json.student.foodRestriction);\n        setDescriptionFoodRestriction(json.student.descriptionFoodRestriction);\n        setImageAuthorization(json.student.imageAuthorization);\n        setAuthorizedPeople(json.student.authorizedPeople);\n        setClasses(json.student.classes);\n        setAdditionalNotes(json.student.additionalNotes);\n        setButton('Editar');\n        \n    };\n\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setDisable(true);\n        setError('');\n\n        console.log(name);\n        alert(name);\n\n        const fData = new FormData();\n        fData.append('name', name);\n        fData.append('birthDate', birthDate);\n        fData.append('responsableName', responsableName);\n        fData.append('phone', phone);\n        fData.append('emergencyWarning', emergencyWarning);\n        fData.append('phoneEmergency', phoneEmergency);\n        fData.append('foodRestriction', foodRestriction);\n        fData.append('descriptionFoodRestriction', descriptionFoodRestriction);\n        fData.append('imageAuthorization', imageAuthorization);\n        fData.append('authorizedPeople', authorizedPeople);\n        fData.append('classes', classes);\n        fData.append('additionalNotes', additionalNotes);\n        \n        if (fileField.current.files.length > 0){\n            fData.append('name', fileField.current.files[0]);\n        }\n\n        if (id){\n            fData.append('id', id);\n        }\n        \n        const json = await api.addStudent(fData);\n                \n        if (json.error){\n            setError(json.error);\n        } else {\n            setSuccess(\"Cadastro realizado com sucesso!\");\n            /**CRIAR UM BOTÃO EDITAR */\n            // history.push(`/students/edit/${json.id}`);\n            getStudent(json.id);\n        }\n\n        setDisable(false);\n    }\n\n    return(\n        <Container>\n            <PageTitle>Cadastro de Aluno</PageTitle>\n            <PageArea>\n                {error &&\n                    <ErrorMessage>{error}</ErrorMessage>\n                }\n                {success &&\n                    <SuccessMessage>{success}</SuccessMessage>\n                }\n                <FormGroup onSubmit={handleSubmit}>\n                    <TextField fullWidth label=\"Nome\" type=\"text\" value={name} onChange={ e => setName(e.target.value) } // required\n                    />\n\n                    <KeyboardDatePicker\n                    disableToolbar\n                    format=\"dd/MM/yyyy\"\n                    margin=\"normal\"\n                    // id=\"date-picker-inline\"\n                    label=\"Date picker inline\"\n                    value={birthDate}\n                    // onChange={}\n                    KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                    }}\n                    />\n                    \n                    \n                    <TextField fullWidth type=\"date\" label=\"Data de Nascimento\" disabled={disable} value={birthDate} onChange={ e => setBirthDate(e.target.value) } // required\n                    />\n\n                    <TextField fullWidth type=\"text\" label=\"Nome do Responsável\" disabled={disable} value={responsableName} onChange={ e => setResponsableName(e.target.value) } // required \n                    />\n\n                    <TextField fullWidth type=\"text\" label=\"Telefone de Contato\" disabled={disable} value={phone} onChange={ e => setPhone(e.target.value) } // required \n                    />\n\n                    <TextField fullWidth type=\"text\" label=\"Aviso de Emergência\" disabled={disable} value={emergencyWarning} onChange={ e => setEmergencyWarning(e.target.value) } // required \n                    />\n            \n                    <TextField fullWidth type=\"text\" label=\"Telefone para Emergência\" disabled={disable} value={phoneEmergency} onChange={ e => setPhoneEmergency(e.target.value) } // required \n                    />\n\n                    {/* <FormControlLabel label=\"Restrição Alimentar\" control={<Checkbox disabled={disable} onChange={e => setFoodRestriction(!foodRestriction)} />} /> */}\n\n                    \n                    <TextField fullWidth type=\"text\" label=\"Descrição da Restrição Alimentar\" disabled={disable} value={descriptionFoodRestriction} onChange={ e => setDescriptionFoodRestriction(e.target.value) } // required \n                    />\n                    \n                    <FormControlLabel label=\"Autorização Para Uso da Imagem\" control={<Checkbox disabled={disable} onChange={ e => setImageAuthorization(true)} /> } /> \n\n\n                    <TextField fullWidth type=\"text\" label=\"Autorizados Para Buscar a Criança\" disabled={disable} value={authorizedPeople} onChange={ e => setAuthorizedPeople(e.target.value)  } // required \n                    />\n\n                    {/* <TextField fullWidth type=\"text\" label=\"Turma\" disabled={disable} value={classesList} onChange={ e => setClasses(e.target.value)  } // required \n                    /> */}\n\n                    <TextField fullWidth type=\"text\" label=\"Observações Adicionais\" disabled={disable} value={additionalNotes} onChange={ e => setAdditionalNotes(e.target.value)  } // required \n                    />\n\n                     {/* <TextField fullWidth type=\"file\" label=\"Adicionar Foto\" disabled={disable} value={fileField} onChange={ e => setAdditionalNotes(e.target.value)  } // required \n                    /> */}\n          \n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\" disabled={disable}>{button}</Button>\n       \n        \n                </FormGroup>\n            </PageArea>\n        </Container>\n    )\n}\n\nexport default Page;"]},"metadata":{},"sourceType":"module"}